"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Lazy=exports.Head_nav=exports.Banner=void 0;var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),_tool=require("./tool.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Banner=function(){function e(){_classCallCheck(this,e),this.banner_num=(0,_tool.$)(".banner-num li"),this.banner_img=(0,_tool.$)(".banner-box img"),this.pindex=0,this.nindex=0,this.timer=null}return _createClass(e,[{key:"init",value:function(){this.banner_num_click(),this.auto_change()}},{key:"banner_num_click",value:function(){for(var e=this,n=this,t=function(t){e.banner_num[t].onclick=function(e){n.banner_change(t)}},i=0;i<this.banner_num.length;i++)t(i);this.banner_num.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;"LI"===t.tagName&&((0,_tool.$)(".banner-num .active").className="",t.className="active")}}},{key:"auto_change",value:function(){var e=this;this.timer=setInterval(function(){e.banner_change(e.pindex+1)},4e3)}},{key:"banner_change",value:function(e){e>=this.banner_img.length&&(e=0),this.nindex=e,this.banner_num[this.pindex].className="",this.banner_num[this.nindex].className="active",this.banner_img[this.pindex].className="",this.banner_img[this.nindex].className="select",this.pindex=this.nindex}}]),e}(),Head_nav=function(){function e(){_classCallCheck(this,e),this.head_nav_sub=(0,_tool.$)(".head-nav-sub"),this.head_nav_ul_li=(0,_tool.$)(".head-nav-ul li"),this.head_nav_ul=(0,_tool.$)(".head-nav-ul"),this.flag=!1,this.index=1,this.pindex=1,this.timer1=null,this.timer2=null,this.timer3=null}return _createClass(e,[{key:"init",value:function(){for(var t=this,n=this,e=function(e){t.head_nav_ul_li[e].onmouseenter=function(){n.index=e,clearTimeout(this.timer3),clearTimeout(this.timer2),clearTimeout(this.timer1),n.timer3=setTimeout(function(){!1===n.flag?n.moveout():n.change()},400)}},i=1;i<this.head_nav_ul_li.length;i++)e(i);this.head_nav_ul.onmouseleave=function(){n.hide()},this.head_nav_ul_li[0].onmouseenter=function(){n.hide()}}},{key:"hide",value:function(){clearTimeout(this.timer3),this.flag=!1;var e=this,t=5;this.timer3=setTimeout(function(){clearInterval(e.timer2),e.timer2=setInterval(function(){e.head_nav_sub[e.index-1].style.height=e.head_nav_sub[e.index-1].offsetHeight-t+"px",t++,e.head_nav_sub[e.index-1].offsetHeight<=10&&(e.head_nav_sub[e.index-1].style.height="0px",e.head_nav_sub[e.index-1].style.display="none",clearInterval(e.timer2))},8)},200)}},{key:"change",value:function(){this.flag=!0,this.head_nav_sub[this.pindex-1].style.display="none",this.head_nav_sub[this.pindex-1].style.height="0px",this.head_nav_sub[this.index-1].style.height="230px",this.head_nav_sub[this.index-1].style.display="block",this.pindex=this.index}},{key:"moveout",value:function(){var e=this,t=5;this.head_nav_sub[e.index-1].style.display="block",clearInterval(this.timer1),this.timer1=setInterval(function(){e.flag=!0,e.head_nav_sub[e.index-1].style.height=e.head_nav_sub[e.index-1].offsetHeight+t+"px",t++,220<=e.head_nav_sub[e.index-1].offsetHeight&&(e.head_nav_sub[e.index-1].style.height="230px",clearInterval(e.timer1),e.pindex=e.index)},8)}}]),e}(),Lazy=function(){function e(){_classCallCheck(this,e),this.render_content=(0,_tool.$)(".home-series-content"),this.tv=(0,_tool.$)("#tv"),this.air=(0,_tool.$)("#air"),this.wash=(0,_tool.$)("#wash"),this.life=(0,_tool.$)("#life"),this.other=(0,_tool.$)("#other"),this.home_activity=(0,_tool.$)(".home-activity"),this.louti_box=(0,_tool.$)(".xhome-fixl"),this.louti_li=(0,_tool.$)(".xhome-fixl ul li"),this.pro_float_toTop=(0,_tool.$)(".pro-float-toTop"),this.box}return _createClass(e,[{key:"init",value:function(){this.lazy(),this.scroll(),this.louti(),this.louti_jump()}},{key:"scroll",value:function(){var t=this;window.onscroll=function(e){e=e||window.ev;t.lazy(),t.louti()}}},{key:"lazy",value:function(){var e=document.documentElement.clientHeight+document.documentElement.scrollTop;this.tv.offsetTop<e&&this.render(this.tv,"电视产品"),this.air.offsetTop-document.documentElement.clientHeight<document.documentElement.scrollTop&&this.render(this.air,"空调产品"),this.wash.offsetTop-document.documentElement.clientHeight<document.documentElement.scrollTop&&this.render(this.wash,"冰洗产品"),this.life.offsetTop-document.documentElement.clientHeight<document.documentElement.scrollTop&&this.render(this.life,"生活家电"),this.other.offsetTop-document.documentElement.clientHeight<document.documentElement.scrollTop&&this.render(this.other,"周边产品")}},{key:"render",value:function(c,u){var d=this,m=8;c.isrander||(c.isrander=!0,"周边产品"===u&&(m=4),_tool.tool.ajax({data:{sort:u},url:"http://10.31.161.172/MyProject/php/get.php",type:"post",dataType:"json",async:!0}).then(function(e){var t=d.getmain(e),n=d.getsort(e),i='\n                <div class="home-series xfindex">\n                <div class="home-series-left">\n                    <div class="home-series-title home-theme-TV">\n                        <p>'+e[0].sort_1+'</p>\n                        <a href="javascript:;" target="">查看更多 &gt;</a>\n                    </div>\n                    <a href="http://10.31.161.172/MyProject/dist/details.html?'+t.sid+'"\n                        class="home-series-tj" target="_blank">\n                        <img class="lazy" alt="" src='+t.url_main+'>\n                    </a>\n                </div>\n                <div class="home-series-content">\n                    <div class="home-series-nav">\n                        <ul>',o=!0,l=!1,a=void 0;try{for(var s,r=n[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){i+="<li> "+s.value+"</li>"}}catch(e){l=!0,a=e}finally{try{!o&&r.return&&r.return()}finally{if(l)throw a}}i+='</ul>\n                    </div>\n                    <div class="home-goods-right" id="TV-div-number">\n                    ';for(var h=0;h<m;h++)i+='\n                    <div class="home-ele-f ">\n                        <div class="home-ele-img">\n                            <a href="http://10.31.161.172/MyProject/dist/details.html?'+e[h].sid+'"\n                                target="_blank">\n                                <img class="lazy" alt=""\n                                    src='+e[h].url_show+'>\n                            </a>\n                        </div>\n                        <div class="home-ele-text">\n                            <h1><a href="http://10.31.161.172/MyProject/dist/details.html?'+e[h].sid+'"\n                                    target="_blank" title='+e[h].name+">"+e[h].name+"</a></h1>\n                            <p>"+e[h].s_title+"</p>\n                            <h2>￥"+e[h].price+"</h2>\n                        </div>\n                    </div>\n                    ";console.log(u+"rander"),i+="</div></div></div></div>",c.innerHTML=i}))}},{key:"getmain",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var a=o.value;if("true"==a.main)return a}}catch(e){n=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw i}}}},{key:"getsort",value:function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var s=l.value;t.indexOf(s.sort_2)<0&&t.push(s.sort_2)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t}},{key:"louti",value:function(){document.documentElement.scrollTop<100&&(this.pro_float_toTop.style.display="none"),100<=document.documentElement.scrollTop&&(this.pro_float_toTop.style.display="block"),this.home_activity.offsetTop<document.documentElement.clientHeight/2+document.documentElement.scrollTop&&(this.louti_box.style.display="block",this.louti_change(0));for(var e=0;e<this.render_content.length;e++)this.render_content[e].offsetTop<document.documentElement.clientHeight/2+document.documentElement.scrollTop&&(this.louti_box.style.display="block",this.louti_change(e+1));this.home_activity.offsetTop-this.louti_box.offsetTop>document.documentElement.scrollTop&&(this.louti_box.style.display="none")}},{key:"louti_jump",value:function(){var t=this;this.louti_li[0].onclick=function(){t.move(-80+t.home_activity.offsetTop)},this.louti_li[this.louti_li.length-1].onclick=function(){t.move(-100+t.render_content[t.render_content.length-1].offsetTop)};for(var e=function(e){t.louti_li[e].onclick=function(){t.lazy(),t.move(-80+t.render_content[e-1].offsetTop)}},n=1;n<this.louti_li.length-1;n++)e(n);this.pro_float_toTop.onclick=function(){console.log(1),t.pro_float_toTop.style.display="none",t.move(0)}}},{key:"move",value:function(t){document.documentElement.timer=null,clearInterval(document.documentElement.time);var n=1;document.documentElement.time=setInterval(function(){!0;var e=document.documentElement.scrollTop;n=0<(n=(t-e)/10)?Math.ceil(n):Math.floor(n),e!=t?(document.documentElement.scrollTop=e+n,!1):clearInterval(document.documentElement.time),console.log(1)},20)}},{key:"louti_change",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,l=this.louti_li[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){o.value.className=""}}catch(e){n=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw i}}this.louti_li[e].className="clicked"}}]),e}();exports.Banner=Banner,exports.Head_nav=Head_nav,exports.Lazy=Lazy;